@model ASP_PV411.Models.Home.HomeDemoViewModel

@{
    ViewData["Title"] = "Forms";
}
<div class="text-center">
    <h1 class="display-4">@Model.PageTitle</h1>
</div>

<p>
    Моделі форм дозволяють групувати дані для комплексних форм, а також допомагати з задачами валідації (перевірки даних).
</p>
<form method="post" class="border m-3 p-3">
    <h3>@Model.FormTitle</h3>
    <div class="row">
        <div class="col">
            <div class="input-group mb-3">
                <span class="input-group-text"
                      id="username-addon">
                    <i class="bi bi-person-vcard"></i>
                </span>
                @{
                    bool isInvalid = !string.IsNullOrEmpty(Model.ModelErrors?["user-name"]);
                    bool isValid = Model.ModelErrors != null && !isInvalid;
                }

                @* Якщо є передача даних форми, то відновлюємо їх у формі *@
                <input type="text"
                       value="@Model.FormModel?.UserName"
                       name="user-name"
                       class="form-control @(isValid ? "is-valid" : "") @(isInvalid ? "is-invalid" : "")"
                       placeholder="Username"
                       aria-label="Username"
                       aria-describedby="username-addon">

                @if (isInvalid)
                {
                    <div class="invalid-feedback">
                        @(Model.ModelErrors!["user-name"])
                    </div>
                }
            </div>
        </div>
        <div class="col">
            <div class="input-group mb-3">
                <span class="input-group-text"
                      id="user-email-addon">
                    <i class="bi bi-envelope-at"></i>
                </span>

                @{
                    isInvalid = !string.IsNullOrEmpty(Model.ModelErrors?["user-name"]);
                    isValid = Model.ModelErrors != null && !isInvalid;
                }

                <input type="email"
                       value="@Model.FormModel?.UserEmail"
                       name="user-email"
                       class="form-control @(isValid ? "is-valid" : "") @(isInvalid ? "is-invalid" : "")"
                       placeholder="E-mail"
                       aria-label="E-mail"
                       aria-describedby="user-email-addon">
                @if (isInvalid)
                {
                    <div class="invalid-feedback">
                        @(Model.ModelErrors!["user-email"])
                    </div>
                }

            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="input-group mb-3">

                <span class="input-group-text"
                      id="user-password-addon">
                    <i class="bi bi-key"></i>
                </span>

                @{
                    isInvalid = !string.IsNullOrEmpty(Model.ModelErrors?["user-password"]);
                }

                <input type="password"
                       title="password"
                       @* value - для паролів не прийнято відтворювати значення *@
                       id="user-password-addon"
                       name="user-password"
                       class="form-control @(isInvalid ? "is-invalid" : "")"
                       placeholder="Password"
                       aria-label="Password"
                       aria-describedby="user-password-addon">

                @if (isInvalid)
                {
                    <div class="invalid-feedback">
                        @(Model.ModelErrors!["user-password"])
                    </div>
                }
            </div>
        </div>

        <div class="col" title="date">
            <div class="input-group mb-3">

                <span class="input-group-text"
                      id="user-birthdate-addon">
                    <i class="bi bi-cake"></i>
                </span>

                @{
                    isInvalid = !string.IsNullOrEmpty(Model.ModelErrors?["user-birthdate"]);
                    isValid = Model.ModelErrors != null && !isInvalid;
                }

                <input type="date"
                       title="Date of birth"
                       id="user-birthdate-addon"
                       name="user-birthdate"
                       class="form-control  @(isValid ? "is-valid" : "") @(isInvalid ? "is-invalid" : "")"
                       aria-label="Date of birth"
                       aria-describedby="user-birthdate-addon"
                       value="@Model.FormModel?.UserBirthdate?.ToString("yyyy-MM-dd")">

                @if (isInvalid)
                {
                    <div class="invalid-feedback">
                        @(Model.ModelErrors!["user-birthdate"])
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="form-check">
                <div class="mb-3">
                    @{
                        isInvalid = !string.IsNullOrEmpty(Model.ModelErrors?["agreement"]);
                        isValid = Model.ModelErrors != null && !isInvalid;
                    }

                    <input class="form-check-input @(isValid ? "is-valid" : "") @(isInvalid ? "is-invalid" : "")"
                           type="checkbox"
                           value="@Model.FormModel?.IsAgree ? " true" : "false" "
                           id="checkDefault"
                           name="agreement">
                    <label class="form-check-label" for="checkDefault">
                        Погоджуюсь з <a asp-action="Privacy">правилами сайту</a>
                    </label>

                    @if (isInvalid)
                    {
                        <div class="invalid-feedback">
                            @(Model.ModelErrors!["agreement"])
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="col">
            <div class="input-group mb-3">

                <span class="input-group-text"
                      id="user-phone-number-addon">
                    <i class="bi bi-phone"></i>
                </span>

                @{
                    isInvalid = !string.IsNullOrEmpty(Model.ModelErrors?["user-phone-number"]);
                    isValid = Model.ModelErrors != null && !isInvalid;
                }

                <input type="tel"
                       title="Phone number"
                       id="user-phone-number-addon"
                       name="user-phone-number"
                       class="form-control  @(isValid ? "is-valid" : "") @(isInvalid ? "is-invalid" : "")"
                       aria-label="Phone number"
                       aria-describedby="user-phone-number-addon"
                       value="@Model.FormModel?.UserPhoneNumber">

                @if (isInvalid)
                {
                    <div class="invalid-feedback">
                        @(Model.ModelErrors!["user-phone-number"])
                    </div>
                }
            </div>
        </div>
    </div>

    <button class="btn btn-primary mt-3" type="submit">
        Передати дані
    </button>
</form>